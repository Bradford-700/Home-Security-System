<!--ADD USER MODAL-->
<div class="modal fade" id="addUserModal" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <i class="material-icons modal-close-btn" data-dismiss="modal">close</i>
        <h4 class="modal-title">Add User</h4>
      </div>
      <div class="modal-body">
        <div class="card-body">
          <form #changeForm="ngForm">
            <div class="row">
              <!--First Name-->
              <div class="col-md-6 col-sm-6 col-xs-6">
                <div class="form-group">
                  <label for="addFirstName">First Name</label>
                  <input id="addFirstName" name="addFirstName" class="form-control"
                         required maxlength="35" pattern="\b([A-ZÀ-ÿ][-,a-z. ']+[ ]*)+"
                         [(ngModel)]="namePlaceholder" #name="ngModel">

                  <div *ngIf="name.invalid && (name.dirty || name.touched)"
                       class="alert alert-danger">
                    Please enter a valid name.
                  </div>
                </div>
              </div>

              <!--Last Name-->
              <div class="col-md-6 col-sm-6 col-xs-6">
                <div class="form-group">
                  <label for="addSurname">Last Name</label>
                  <input id="addSurname" name="addSurname" class="form-control"
                         required maxlength="35" pattern="\b([A-ZÀ-ÿ][-,a-z. ']+[ ]*)+"
                         [(ngModel)]="surnamePlaceholder" #lname="ngModel">

                  <div *ngIf="lname.invalid && (lname.dirty || lname.touched)"
                       class="alert alert-danger">
                    Please enter a valid last name.
                  </div>
                </div>
              </div>
            </div>

            <br>

            <div class="row">
              <!--Username-->
              <div class="col-md-6 col-sm-6 col-xs-6">
                <div class="form-group">
                  <label for="addUsername">Username (12 Characters)</label>
                  <input id="addUsername" name="addUsername" class="form-control"
                         required maxlength="12"
                         [(ngModel)]="usernamePlaceholder" #username="ngModel">

                  <div *ngIf="username.invalid && (username.dirty || username.touched)"
                       class="alert alert-danger">

                    <div *ngIf="username.errors.required">
                      Username is required.
                    </div>
                  </div>
                </div>
              </div>

              <!--Email-->
              <div class="col-md-6 col-sm-6 col-xs-6">
                <div class="form-group">
                  <label for="addEmail">Email</label>
                  <input id="addEmail" name="addEmail" class="form-control"
                         required email
                         pattern="(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*)@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])"
                         [(ngModel)]="emailPlaceholder" #email="ngModel">

                  <div *ngIf="email.invalid && (email.dirty || email.touched)"
                       class="alert alert-danger">
                    Please enter a valid email address.
                  </div>
                </div>
              </div>
            </div>

            <br>

            <div class="row">
              <!--Contact Number-->
              <div class="col-md-6 col-sm-6 col-xs-6">
                <div class="form-group">
                  <label for="addPhone">Contact Number</label>
                  <input id="addPhone" name="addPhone" class="form-control"
                         required maxlength="12"
                         pattern="^((?:\+27))(=|72|82|73|83|74|84|79)(\d{7})$"
                         [(ngModel)]="phonePlaceholder" #contactNo="ngModel" placeholder="+27*******">
                  <div *ngIf="contactNo.invalid && (contactNo.dirty || contactNo.touched)"
                       class="alert alert-danger">
                    Please enter a valid phone number starting with +27.
                  </div>
                </div>
              </div>

              <!--Password-->
              <div class="col-md-6 col-sm-6 col-xs-6">
                <div class="form-group">
                  <label for="passwordField1">Password</label>
                  <input type="password" id="passwordField1" name="passwordField1" class="form-control"
                         required maxlength="35"
                         pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$"
                         [(ngModel)]="passPlaceholder" #userPass="ngModel">
                  <i class="material-icons hoverPointer" id="passwordVisibility1" onclick="showPassword('1')">visibility_off</i>
                  <div *ngIf="userPass.invalid && (userPass.dirty || userPass.touched)"
                       class="alert alert-danger">
                    <ul>
                      <h6>Must contain:</h6>
                      <li>At least eight characters</li>
                      <li>At least one uppercase letter</li>
                      <li>At least one lowercase letter</li>
                      <li>One number</li>
                      <li>One special character</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>

            <div *ngIf="userPass.dirty">
              <div class="row">
                <div class="col-md-6 col-sm-6 col-xs-6">
                </div>
                <div class="col-md-6 col-sm-6 col-xs-6">
                  <div class="form-group">
                    <label for="passwordField2">Confirm Password</label>
                    <input type="password" id="passwordField2" name="confirmPassword" class="form-control"
                           [(ngModel)]="confirmPassPlaceholder" #confirm="ngModel">
                    <i class="material-icons hoverPointer" id="passwordVisibility2" onclick="showPassword('2')">visibility_off</i>
                    <div *ngIf="userPass.value != confirmPassPlaceholder.valueOf()"
                         class="alert alert-danger">
                      Passwords do not match
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <br>

            <div class="row">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="form-group">
                  <label for="answerField">Security Question:</label>
                  <br>
                  <select name="questions" id="questions" class="form-control custom-select-lg" data-style="btn btn-link">
                    <option value="one">What was the name of your first stuffed animal?</option>
                    <option value="two">Where were you when you had your first kiss?</option>
                    <option value="three">What street did you live on in third grade?</option>
                    <option value="four">What was the name of your childhood bully?</option>
                    <option value="five">What did you want to name your child but never did?</option>
                  </select>
                  <br>
                  <input id="answerField" name="answerField" class="form-control"
                         required maxlength="35"
                         pattern="^[a-zA-Z0-9_.-]*$" placeholder="Answer"
                         [(ngModel)]="answerPlaceholder" #answer="ngModel">
                  <div *ngIf="answer.invalid && (answer.dirty || answer.touched)"
                       class="alert alert-danger">
                    Please enter a valid response.
                  </div>
                </div>
              </div>
            </div>
            <br>
            <!--Role-->
            <div class="form-group">
              <label class="float-left">Role</label><br><br>
              <label class="radioContainer" *ngIf="info.userRole == 'Admin'">Admin
                <input type="radio" name="role" id="admin" value="Admin">
                <span class="radioCheckmark"></span>
              </label>
              <label class="radioContainer">Advanced
                <input type="radio" checked="checked" name="role" id="advanced" value="Advanced">
                <span class="radioCheckmark"></span>
              </label>
              <label class="radioContainer">Basic
                <input type="radio" name="role" id="basic" value="Basic">
                <span class="radioCheckmark"></span>
              </label>
            </div>

            <!--Profile Picture-->
            <div class="form-group center ">
              <label for="profilePicInput" class="float-left">Profile Picture</label><br><br>
              <div class="picture-container">
                <div id="preview">
                  <img alt="Default Picture" id="submitPhoto" src="/assets/Images/blank.jpg">
                </div>
                <br>
              </div>

              <label id="profilePicInput" for="fileElem">
                <i class="material-icons add-photo-icon">add_photo_alternate</i><br>
                <input type="file" id="fileElem" accept="image/jpeg, image/png" onchange="previewFile(this.file)">
                Drag and Drop an image<br>
              </label>

              or<br>

              <a class="hoverPointer" data-toggle="modal" data-target="#pictureModal" (click)="toggleCam()">
                capture a photo from camera
              </a>
            </div>
          </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn btn-primary pull-right" data-dismiss="modal" (click)="onSubmit()"
                [disabled]="changeForm.invalid">
          Add
        </button>
      </div>
    </div>
  </div>
</div>

<!--TAKE PHOTO MODAL-->
<div class="container">
  <div class="modal fade picModal" id="pictureModal" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Take a picture</h4>
          <i class="material-icons modal-close-btn" data-toggle="modal" data-target="#pictureModal">close</i>
        </div>
        <div class="modal-body center">
          <div id="app">
            <div>
              <webcam [width]="400" [imageQuality]="0.92" [trigger]="triggerObservable"
                      *ngIf="showCam"
                      (imageCapture)="handleShot($event)">
              </webcam>
            </div>
            <div>
              <button class="btn btn-primary" (click)="trigger_s();">Snap
              </button>
            </div>
            <div class="snapshot" *ngIf="camImg">
              <h2>Preview:</h2>
              <img id="confirmPic" width="400px" [src]="camImg.imageAsDataUrl" alt="Preview"/>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary pull-right" data-toggle="modal" data-target="#pictureModal"
                  onclick="previewFileFromCam()" (click)="toggleCam()">
            Confirm
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!--LOADING SPINNER-->
<ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="default" type="ball-spin-clockwise">
  <p style="color: white">Please Wait. </p>
</ngx-spinner>
